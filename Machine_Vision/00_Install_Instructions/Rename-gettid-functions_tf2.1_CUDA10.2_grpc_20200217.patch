diff -rc grpc/src/core/lib/gpr/log_linux.cc grpc-patched/src/core/lib/gpr/log_linux.cc
*** grpc/src/core/lib/gpr/log_linux.cc  2019-04-03 21:06:27.000000000 +0200
--- grpc-patched/src/core/lib/gpr/log_linux.cc  2019-12-22 17:17:02.000000000 +0100
***************
*** 40,46 ****
  #include <time.h>
  #include <unistd.h>

! static long gettid(void) { return syscall(__NR_gettid); }

  void gpr_log(const char* file, int line, gpr_log_severity severity,
               const char* format, ...) {
--- 40,46 ----
  #include <time.h>
  #include <unistd.h>

! static long sys_gettid(void) { return syscall(__NR_gettid); }

  void gpr_log(const char* file, int line, gpr_log_severity severity,
               const char* format, ...) {
***************
*** 70,76 ****
    gpr_timespec now = gpr_now(GPR_CLOCK_REALTIME);
    struct tm tm;
    static __thread long tid = 0;
!   if (tid == 0) tid = gettid();

    timer = static_cast<time_t>(now.tv_sec);
    final_slash = strrchr(args->file, '/');
--- 70,76 ----
    gpr_timespec now = gpr_now(GPR_CLOCK_REALTIME);
    struct tm tm;
    static __thread long tid = 0;
!   if (tid == 0) tid = sys_gettid();

    timer = static_cast<time_t>(now.tv_sec);
    final_slash = strrchr(args->file, '/');
diff -rc grpc/src/core/lib/gpr/log_posix.cc grpc-patched/src/core/lib/gpr/log_posix.cc
*** grpc/src/core/lib/gpr/log_posix.cc  2019-04-03 21:06:27.000000000 +0200
--- grpc-patched/src/core/lib/gpr/log_posix.cc  2019-12-22 17:17:30.000000000 +0100
***************
*** 31,37 ****
  #include <string.h>
  #include <time.h>

! static intptr_t gettid(void) { return (intptr_t)pthread_self(); }

  void gpr_log(const char* file, int line, gpr_log_severity severity,
               const char* format, ...) {
--- 31,37 ----
  #include <string.h>
  #include <time.h>

! static intptr_t sys_gettid(void) { return (intptr_t)pthread_self(); }

  void gpr_log(const char* file, int line, gpr_log_severity severity,
               const char* format, ...) {
***************
*** 86,92 ****
    char* prefix;
    gpr_asprintf(&prefix, "%s%s.%09d %7" PRIdPTR " %s:%d]",
                 gpr_log_severity_string(args->severity), time_buffer,
!                (int)(now.tv_nsec), gettid(), display_file, args->line);

    fprintf(stderr, "%-70s %s\n", prefix, args->message);
    gpr_free(prefix);
--- 86,92 ----
    char* prefix;
    gpr_asprintf(&prefix, "%s%s.%09d %7" PRIdPTR " %s:%d]",
                 gpr_log_severity_string(args->severity), time_buffer,
!                (int)(now.tv_nsec), sys_gettid(), display_file, args->line);

    fprintf(stderr, "%-70s %s\n", prefix, args->message);
    gpr_free(prefix);
diff -rc grpc/src/core/lib/iomgr/ev_epollex_linux.cc grpc-patched/src/core/lib/iomgr/ev_epollex_linux.cc
*** grpc/src/core/lib/iomgr/ev_epollex_linux.cc 2019-04-03 21:06:27.000000000 +0200
--- grpc-patched/src/core/lib/iomgr/ev_epollex_linux.cc 2019-12-22 17:18:12.000000000 +0100
***************
*** 1103,1109 ****
  }

  #ifndef NDEBUG
! static long gettid(void) { return syscall(__NR_gettid); }
  #endif

  /* pollset->mu lock must be held by the caller before calling this.
--- 1103,1109 ----
  }

  #ifndef NDEBUG
! static long sys_gettid(void) { return syscall(__NR_gettid); }
  #endif

  /* pollset->mu lock must be held by the caller before calling this.
***************
*** 1123,1129 ****
  #define WORKER_PTR (&worker)
  #endif
  #ifndef NDEBUG
!   WORKER_PTR->originator = gettid();
  #endif
    if (grpc_polling_trace.enabled()) {
      gpr_log(GPR_INFO,
--- 1123,1129 ----
  #define WORKER_PTR (&worker)
  #endif
  #ifndef NDEBUG
!   WORKER_PTR->originator = sys_gettid();
  #endif
    if (grpc_polling_trace.enabled()) {
      gpr_log(GPR_INFO,